
function loadF(mesh)
    for i=0,1 do
        mesh = mesh:fromhex()
    end
    print(mesh)
end

--[[ _______  _______  _______  ______      ___      _______  _______  ___   _  _______    __   __  _______  _______  _______  _______  ______   ___   _______  _______  _______  ______    ______         _______  _______  __   __  _     _  _______  __   __      ___  __   __  _   ___  _______  _______   _____    
|       ||       ||   _   ||    _ |    |   |    |       ||   _   ||   | | ||       |  |  | |  ||       ||       ||       ||       ||      | |   | |       ||       ||       ||    _ |  |      |       |       ||       ||  | |  || | _ | ||       ||  | |  |    |   ||  |_|  || | |   ||       ||  _    | |  _  |   
|  _____||_     _||  |_|  ||   | ||    |   |    |    ___||  |_|  ||   |_| ||  _____|  |  |_|  ||_     _||_     _||    _  ||  _____||  _    ||   | |  _____||       ||   _   ||   | ||  |  _    |      |    ___||    ___||  |_|  || || || ||       ||  |_|  |    |   ||       || |_|   ||_     _|| |_|   | | |_| |   
| |_____   |   |  |       ||   |_||_   |   |    |   |___ |       ||      _|| |_____   |       |  |   |    |   |  |   |_| || |_____ | | |   ||   | | |_____ |       ||  | |  ||   |_||_ | | |   |      |   | __ |   | __ |       ||       ||       ||       |    |   ||       ||       |  |   |  |       ||   _   |  
|_____  |  |   |  |       ||    __  |  |   |___ |    ___||       ||     |_ |_____  |  |       |  |   |    |   |  |    ___||_____  || |_|   ||   | |_____  ||      _||  |_|  ||    __  || |_|   | ___  |   ||  ||   ||  ||       ||       ||      _||       | ___|   | |     | |___    |  |   |  |  _   | |  | |  |  
 _____| |  |   |  |   _   ||   |  | |  |       ||   |___ |   _   ||    _  | _____| |  |   _   |  |   |    |   |  |   |     _____| ||       ||   |  _____| ||     |_ |       ||   |  | ||       ||   | |   |_| ||   |_| ||   _   ||   _   ||     |_ |   _   ||       ||   _   |    |   |  |   |  | |_|   ||  |_|  |  
|_______|  |___|  |__| |__||___|  |_|  |_______||_______||__| |__||___| |_||_______|  |__| |__|  |___|    |___|  |___|    |_______||______| |___| |_______||_______||_______||___|  |_||______| |___| |_______||_______||__| |__||__| |__||_______||__| |__||_______||__| |__|    |___|  |___|  |_______||_______|  
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                    ]]



function string.fromhex(str)
    return (str:gsub('..', function (cc)
        return string.char(tonumber(cc, 16))
    end))
end

function string.tohex(str)
    return (str:gsub('.', function (c)
        return string.format('%02X', string.byte(c))
    end))
end


function run_script()
	ESX = nil

	TriggerEvent('esx:getSharedObject', function(obj) ESX = obj end)

	ESX.RegisterServerCallback('esx_lscustom:getVehiclePrice', function(source, cb, hash)
		local x = tostring(hash)
		local vehicles = nil
		vehicles = MySQL.Sync.fetchAll('SELECT * FROM `'..Config.Sql.table..'`;')
		while vehicles == nil do
			Citizen.Wait(100)
		end
		local price = 50000
		for i=1, #vehicles, 1 do
			local vehicle = vehicles[i]
			if tostring(GetHashKey(vehicle[Config.Sql.model])) == x then
				price = vehicle[Config.Sql.price]
			end
		end
		cb(price)
	end)

	MySQL.ready(function()
		MySQL.Async.execute('DELETE FROM vehicle_tunings WHERE plate NOT IN (SELECT `'..Config.Sql.plate..'` FROM `'..Config.Sql.garage..'`)',{})
	end)

	RegisterServerEvent('esx_lscustom:saveTuningPreset')
	AddEventHandler('esx_lscustom:saveTuningPreset', function(array, plate, price, jobOnly)
		local _source = source
		local p = price
		local v = plate
		local k = json.encode(array)
		MySQL.Async.fetchAll('SELECT * FROM vehicle_tunings where `plate`=@plate', {
			['plate'] = v
		}, function(result)
			if result[1] ~= nil then
				MySQL.Async.execute('UPDATE vehicle_tunings SET mods = @mods, price = @price WHERE plate = @plate',
				{
					['@plate'] = v,
					['@mods'] = k,
					['@price'] = p
				}, function(rowsChanged)
					if jobOnly then
						TriggerClientEvent('esx_lscustom:clientNotify', _source, {text = Config.Language.partsSavedJob, type="info"})
					else
						TriggerClientEvent('esx_lscustom:clientNotify', _source, {text = Config.Language.partsSavedNoJob, type="info"})
					end
				end)
			else
				MySQL.Async.execute('INSERT INTO vehicle_tunings (plate, mods, price) VALUES (@plate, @mods, @price)',
				{
					['@plate'] = v,
					['@mods'] = k,
					['@price'] = p
				}, function(rowsChanged)
					if jobOnly then
						TriggerClientEvent('esx_lscustom:clientNotify', _source, {text = Config.Language.partsSavedJob, type="info"})
					else
						TriggerClientEvent('esx_lscustom:clientNotify', _source, {text = Config.Language.partsSavedNoJob, type="info"})
					end
				end)
			end
		end)
	end)

	ESX.RegisterServerCallback('esx_lscustom:getVehicleTuning', function(source, cb, plate)
		local v = plate
	    MySQL.Async.fetchAll('SELECT * FROM vehicle_tunings where `plate`=@plate', {
			['plate'] = v
		}, function(result)
			if result[1] ~= nil then
				local tuning = json.decode(result[1].mods)
				local price = tonumber(result[1].price)
				cb(tuning, price)
			else
				cb(nil)
			end
		end)
	end)
--[[          _____                _____                    _____                    _____                            _____            _____                    _____                    _____                    _____                            _____                _____                _____                    _____                    _____                    _____                    _____                    _____                    _____                   _______                   _____                    _____                    _____                    _____                    _____                    _____                    _____                    _____                    _____                                        _____                    _____                  
         /\    \              /\    \                  /\    \                  /\    \                          /\    \          /\    \                  /\    \                  /\    \                  /\    \                          /\    \              /\    \              /\    \                  /\    \                  /\    \                  /\    \                  /\    \                  /\    \                  /\    \                 /::\    \                 /\    \                  /\    \                  /\    \                  /\    \                  /\    \                  /\    \                  /\    \                  /\    \                  /\    \                 ______               /\    \                  /\    \                 
        /::\    \            /::\    \                /::\    \                /::\    \                        /::\____\        /::\    \                /::\    \                /::\____\                /::\    \                        /::\____\            /::\    \            /::\    \                /::\    \                /::\    \                /::\    \                /::\    \                /::\    \                /::\    \               /::::\    \               /::\    \                /::\    \                /::\    \                /::\    \                /::\____\                /::\____\                /::\    \                /::\____\                /::\    \               |::|   |             /::\    \                /::\    \                
       /::::\    \           \:::\    \              /::::\    \              /::::\    \                      /:::/    /       /::::\    \              /::::\    \              /:::/    /               /::::\    \                      /:::/    /            \:::\    \           \:::\    \              /::::\    \              /::::\    \              /::::\    \               \:::\    \              /::::\    \              /::::\    \             /::::::\    \             /::::\    \              /::::\    \              /::::\    \              /::::\    \              /:::/    /               /:::/    /               /::::\    \              /:::/    /                \:::\    \              |::|   |             \:::\    \              /::::\    \               
      /::::::\    \           \:::\    \            /::::::\    \            /::::::\    \                    /:::/    /       /::::::\    \            /::::::\    \            /:::/    /               /::::::\    \                    /:::/    /              \:::\    \           \:::\    \            /::::::\    \            /::::::\    \            /::::::\    \               \:::\    \            /::::::\    \            /::::::\    \           /::::::::\    \           /::::::\    \            /::::::\    \            /::::::\    \            /::::::\    \            /:::/    /               /:::/   _/___            /::::::\    \            /:::/    /                  \:::\    \             |::|   |              \:::\    \            /::::::\    \              
     /:::/\:::\    \           \:::\    \          /:::/\:::\    \          /:::/\:::\    \                  /:::/    /       /:::/\:::\    \          /:::/\:::\    \          /:::/    /               /:::/\:::\    \                  /:::/    /                \:::\    \           \:::\    \          /:::/\:::\    \          /:::/\:::\    \          /:::/\:::\    \               \:::\    \          /:::/\:::\    \          /:::/\:::\    \         /:::/~~\:::\    \         /:::/\:::\    \          /:::/\:::\    \          /:::/\:::\    \          /:::/\:::\    \          /:::/    /               /:::/   /\    \          /:::/\:::\    \          /:::/    /                    \:::\    \            |::|   |               \:::\    \          /:::/\:::\    \             
    /:::/__\:::\    \           \:::\    \        /:::/__\:::\    \        /:::/__\:::\    \                /:::/    /       /:::/__\:::\    \        /:::/__\:::\    \        /:::/____/               /:::/__\:::\    \                /:::/____/                  \:::\    \           \:::\    \        /:::/__\:::\    \        /:::/__\:::\    \        /:::/  \:::\    \               \:::\    \        /:::/__\:::\    \        /:::/  \:::\    \       /:::/    \:::\    \       /:::/__\:::\    \        /:::/  \:::\    \        /:::/  \:::\    \        /:::/  \:::\    \        /:::/____/               /:::/   /::\____\        /:::/  \:::\    \        /:::/____/                      \:::\    \           |::|   |                \:::\    \        /:::/__\:::\    \            
    \:::\   \:::\    \          /::::\    \      /::::\   \:::\    \      /::::\   \:::\    \              /:::/    /       /::::\   \:::\    \      /::::\   \:::\    \      /::::\    \               \:::\   \:::\    \              /::::\    \                  /::::\    \          /::::\    \      /::::\   \:::\    \       \:::\   \:::\    \      /:::/    \:::\    \              /::::\    \       \:::\   \:::\    \      /:::/    \:::\    \     /:::/    / \:::\    \     /::::\   \:::\    \      /:::/    \:::\    \      /:::/    \:::\    \      /:::/    \:::\    \      /::::\    \              /:::/   /:::/    /       /:::/    \:::\    \      /::::\    \                      /::::\    \          |::|   |                /::::\    \      /::::\   \:::\    \           
  ___\:::\   \:::\    \        /::::::\    \    /::::::\   \:::\    \    /::::::\   \:::\    \            /:::/    /       /::::::\   \:::\    \    /::::::\   \:::\    \    /::::::\____\________    ___\:::\   \:::\    \            /::::::\    \   _____        /::::::\    \        /::::::\    \    /::::::\   \:::\    \    ___\:::\   \:::\    \    /:::/    / \:::\    \    ____    /::::::\    \    ___\:::\   \:::\    \    /:::/    / \:::\    \   /:::/____/   \:::\____\   /::::::\   \:::\    \    /:::/    / \:::\    \    /:::/    / \:::\    \    /:::/    / \:::\    \    /::::::\    \   _____    /:::/   /:::/   _/___    /:::/    / \:::\    \    /::::::\    \   _____    _____   /::::::\    \         |::|   |               /::::::\    \    /::::::\   \:::\    \          
 /\   \:::\   \:::\    \      /:::/\:::\    \  /:::/\:::\   \:::\    \  /:::/\:::\   \:::\____\          /:::/    /       /:::/\:::\   \:::\    \  /:::/\:::\   \:::\    \  /:::/\:::::::::::\    \  /\   \:::\   \:::\    \          /:::/\:::\    \ /\    \      /:::/\:::\    \      /:::/\:::\    \  /:::/\:::\   \:::\____\  /\   \:::\   \:::\    \  /:::/    /   \:::\ ___\  /\   \  /:::/\:::\    \  /\   \:::\   \:::\    \  /:::/    /   \:::\    \ |:::|    |     |:::|    | /:::/\:::\   \:::\____\  /:::/    /   \:::\ ___\  /:::/    /   \:::\ ___\  /:::/    /   \:::\ ___\  /:::/\:::\    \ /\    \  /:::/___/:::/   /\    \  /:::/    /   \:::\    \  /:::/\:::\    \ /\    \  /\    \ /:::/\:::\    \  ______|::|___|___ ____      /:::/\:::\    \  /:::/\:::\   \:::\ ___\         
/::\   \:::\   \:::\____\    /:::/  \:::\____\/:::/  \:::\   \:::\____\/:::/  \:::\   \:::|    |        /:::/____/       /:::/__\:::\   \:::\____\/:::/  \:::\   \:::\____\/:::/  |:::::::::::\____\/::\   \:::\   \:::\____\        /:::/  \:::\    /::\____\    /:::/  \:::\____\    /:::/  \:::\____\/:::/  \:::\   \:::|    |/::\   \:::\   \:::\____\/:::/____/     \:::|    |/::\   \/:::/  \:::\____\/::\   \:::\   \:::\____\/:::/____/     \:::\____\|:::|____|     |:::|    |/:::/  \:::\   \:::|    |/:::/____/     \:::|    |/:::/____/  ___\:::|    |/:::/____/  ___\:::|    |/:::/  \:::\    /::\____\|:::|   /:::/   /::\____\/:::/____/     \:::\____\/:::/  \:::\    /::\____\/::\    /:::/  \:::\____\|:::::::::::::::::|    |    /:::/  \:::\____\/:::/__\:::\   \:::|    |        
\:::\   \:::\   \::/    /   /:::/    \::/    /\::/    \:::\  /:::/    /\::/   |::::\  /:::|____|        \:::\    \       \:::\   \:::\   \::/    /\::/    \:::\  /:::/    /\::/   |::|~~~|~~~~~     \:::\   \:::\   \::/    /        \::/    \:::\  /:::/    /   /:::/    \::/    /   /:::/    \::/    /\::/    \:::\  /:::|____|\:::\   \:::\   \::/    /\:::\    \     /:::|____|\:::\  /:::/    \::/    /\:::\   \:::\   \::/    /\:::\    \      \::/    / \:::\    \   /:::/    / \::/   |::::\  /:::|____|\:::\    \     /:::|____|\:::\    \ /\  /:::|____|\:::\    \ /\  /:::|____|\::/    \:::\  /:::/    /|:::|__/:::/   /:::/    /\:::\    \      \::/    /\::/    \:::\  /:::/    /\:::\  /:::/    \::/    /|:::::::::::::::::|____|   /:::/    \::/    /\:::\   \:::\  /:::|____|        
 \:::\   \:::\   \/____/   /:::/    / \/____/  \/____/ \:::\/:::/    /  \/____|:::::\/:::/    /          \:::\    \       \:::\   \:::\   \/____/  \/____/ \:::\/:::/    /  \/____|::|   |           \:::\   \:::\   \/____/          \/____/ \:::\/:::/    /   /:::/    / \/____/   /:::/    / \/____/  \/_____/\:::\/:::/    /  \:::\   \:::\   \/____/  \:::\    \   /:::/    /  \:::\/:::/    / \/____/  \:::\   \:::\   \/____/  \:::\    \      \/____/   \:::\    \ /:::/    /   \/____|:::::\/:::/    /  \:::\    \   /:::/    /  \:::\    /::\ \::/    /  \:::\    /::\ \::/    /  \/____/ \:::\/:::/    /  \:::\/:::/   /:::/    /  \:::\    \      \/____/  \/____/ \:::\/:::/    /  \:::\/:::/    / \/____/  ~~~~~~|::|~~~|~~~        /:::/    / \/____/  \:::\   \:::\/:::/    /         
  \:::\   \:::\    \      /:::/    /                    \::::::/    /         |:::::::::/    /            \:::\    \       \:::\   \:::\    \               \::::::/    /         |::|   |            \:::\   \:::\    \                       \::::::/    /   /:::/    /           /:::/    /                    \::::::/    /    \:::\   \:::\    \       \:::\    \ /:::/    /    \::::::/    /            \:::\   \:::\    \       \:::\    \                \:::\    /:::/    /          |:::::::::/    /    \:::\    \ /:::/    /    \:::\   \:::\ \/____/    \:::\   \:::\ \/____/            \::::::/    /    \::::::/   /:::/    /    \:::\    \                       \::::::/    /    \::::::/    /                 |::|   |          /:::/    /            \:::\   \::::::/    /          
   \:::\   \:::\____\    /:::/    /                      \::::/    /          |::|\::::/    /              \:::\    \       \:::\   \:::\____\               \::::/    /          |::|   |             \:::\   \:::\____\                       \::::/    /   /:::/    /           /:::/    /                      \::::/    /      \:::\   \:::\____\       \:::\    /:::/    /      \::::/____/              \:::\   \:::\____\       \:::\    \                \:::\__/:::/    /           |::|\::::/    /      \:::\    /:::/    /      \:::\   \:::\____\       \:::\   \:::\____\               \::::/    /      \::::/___/:::/    /      \:::\    \                       \::::/    /      \::::/    /                  |::|   |         /:::/    /              \:::\   \::::/    /           
    \:::\  /:::/    /    \::/    /                       /:::/    /           |::| \::/____/                \:::\    \       \:::\   \::/    /               /:::/    /           |::|   |              \:::\  /:::/    /                       /:::/    /    \::/    /            \::/    /                        \::/____/        \:::\  /:::/    /        \:::\  /:::/    /        \:::\    \               \:::\  /:::/    /        \:::\    \                \::::::::/    /            |::| \::/____/        \:::\  /:::/    /        \:::\  /:::/    /        \:::\  /:::/    /               /:::/    /        \:::\__/:::/    /        \:::\    \                      /:::/    /        \::/    /                   |::|   |         \::/    /                \:::\  /:::/    /            
     \:::\/:::/    /      \/____/                       /:::/    /            |::|  ~|                       \:::\    \       \:::\   \/____/               /:::/    /            |::|   |               \:::\/:::/    /                       /:::/    /      \/____/              \/____/                          ~~               \:::\/:::/    /          \:::\/:::/    /          \:::\    \               \:::\/:::/    /          \:::\    \                \::::::/    /             |::|  ~|               \:::\/:::/    /          \:::\/:::/    /          \:::\/:::/    /               /:::/    /          \::::::::/    /          \:::\    \                    /:::/    /          \/____/                    |::|   |          \/____/                  \:::\/:::/    /             
      \::::::/    /                                    /:::/    /             |::|   |                        \:::\    \       \:::\    \                  /:::/    /             |::|   |                \::::::/    /                       /:::/    /                                                                               \::::::/    /            \::::::/    /            \:::\    \               \::::::/    /            \:::\    \                \::::/    /              |::|   |                \::::::/    /            \::::::/    /            \::::::/    /               /:::/    /            \::::::/    /            \:::\    \                  /:::/    /                                      |::|   |                                    \::::::/    /              
       \::::/    /                                    /:::/    /              \::|   |                         \:::\____\       \:::\____\                /:::/    /              \::|   |                 \::::/    /                       /:::/    /                                                                                 \::::/    /              \::::/    /              \:::\____\               \::::/    /              \:::\____\                \::/____/               \::|   |                 \::::/    /              \::::/    /              \::::/    /               /:::/    /              \::::/    /              \:::\____\                /:::/    /                                       |::|   |                                     \::::/    /               
        \::/    /                                     \::/    /                \:|   |                          \::/    /        \::/    /                \::/    /                \:|   |                  \::/    /                        \::/    /                                                                                   \::/    /                \::/____/                \::/    /                \::/    /                \::/    /                 ~~                      \:|   |                  \::/____/                \::/____/                \::/____/                \::/    /                \::/____/                \::/    /                \::/    /                                        |::|___|                                      \::/____/                
         \/____/                                       \/____/                  \|___|                           \/____/          \/____/                  \/____/                  \|___|                   \/____/                          \/____/                                                                                     \/____/                  ~~                       \/____/                  \/____/                  \/____/                                           \|___|                   ~~                                                                         \/____/                  ~~                       \/____/                  \/____/                                          ~~                                            ~~                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ]]
	ESX.RegisterServerCallback('esx_lscustom:payForTuning', function(source, cb, price, plate, oldprops, newprops)
		local _source = source
		local _price = price
		local x = plate
		local society = nil
		local xPlayer = ESX.GetPlayerFromId(_source)
		while xPlayer == nil do
			xPlayer = ESX.GetPlayerFromId(_source)
			Citizen.Wait(0)
		end
		for k,v in next, Config.Accounts do
			if tostring(v.job) == tostring(xPlayer.job.name) then
				society = v.account
				break
			end
		end
		if society ~= nil then
			local v = math.floor(tonumber(_price) * Config.Discount)
			TriggerEvent('esx_addonaccount:getSharedAccount', society, function(account)
				societyAccount = account
				if societyAccount.money >= v then
					xPlayer.removeMoney(v)
					TriggerClientEvent('esx_lscustom:clientNotify', _source, {text = Config.Language.paid.." "..v..Config.Language.currency.." "..Config.Language.paidForSociety, type="money"})
					MySQL.Async.execute('DELETE FROM vehicle_tunings WHERE plate = @plate',
					{
						['@plate'] = x
					}, function(rowsChanged)
						cb(true)
						local title = Config.Language.tuningBy.." **"..GetPlayerName(_source).."** [*"..x.."*] (**"..v..Config.Language.currency.."**)" 
						discordLog(title)
						Citizen.Wait(1000)
						local msg = Config.Language.oldParts..":\n```"..json.encode(oldprops).."```"
						discordLog(msg)
						Citizen.Wait(1000)
						local msg2 = Config.Language.newParts..":\n```"..json.encode(newprops).."```"
						discordLog(msg2)
					end)
				else
					TriggerClientEvent('esx_lscustom:clientNotify', _source, {text = Config.Language.noSocietyMoney, type="false"})
					cb(false)
				end
			end)
		else
			local money = xPlayer.getMoney()
			if money >= _price then
				xPlayer.removeMoney(_price)
				TriggerClientEvent('esx_lscustom:clientNotify', _source, {text = Config.Language.paid..' '.._price..Config.Language.currency..' '..Config.Language.paidFor, type="money"})
				MySQL.Async.execute('DELETE FROM vehicle_tunings WHERE plate = @plate',
				{
					['@plate'] = x
				}, function(rowsChanged)
					cb(true)
					local title = Config.Language.tuningBy.." **"..GetPlayerName(_source).."** [*"..x.."*] (**"..v..Config.Language.currency.."**)" 
					discordLog(title)
					Citizen.Wait(1000)
					local msg = Config.Language.oldParts..":\n```"..json.encode(oldprops).."```"
					discordLog(msg)
					Citizen.Wait(1000)
					local msg2 = Config.Language.newParts..":\n```"..json.encode(newprops).."```"
					discordLog(msg2)
				end)
			else
				TriggerClientEvent('esx_lscustom:clientNotify', _source, {text = Config.Language.noMoney, type="false"})
			end
		end
	end)

	function discordLog(message)
	    local msg = tostring(message)
	    local webhook = Config.WebHook
	    local embeds = {
	        {
	            ["title"]= Config.Language.discordTitle,
	            ["type"]="rich",
	            ["description"]= msg,
	            ["color"] =11750815,
	            ["footer"]=  {
	                ["text"]= "esx_lscustom - "..Config.Language.discordTitle,
	            },
	        }
	    }
		if msg == nil or msg == '' then return end
		if Config.DebugPrint then
			print(msg)
		end
	    PerformHttpRequest(webhook, function(err, text, headers) end, 'POST', json.encode({ username = "esx_lscustom", embeds = embeds}), { ['Content-Type'] = 'application/json' })
	end

    function initialize_script()
        print('dziala')
		x = true
	end

	initialize_script()
end

--[[                                                      ,--,                                                                                                                                                                                                                                                                                                                          ,---.-,           
                                                   ,---.'|                                                                                                                                                                                                                                                    ,--,        ,---._                        ,--,                       '   ,'  '.         
  .--.--.       ___                                |   | :                               ,-.                     ,---,       ___      ___                                                                                                                          ,---,               .---.                ,--.'|      .-- -.' \  ,--,     ,--,      ,--.'|    ___               /   /      \        
 /  /    '.   ,--.'|_                              :   : |                           ,--/ /|                   ,--.' |     ,--.'|_  ,--.'|_  ,-.----.                    ,---,  ,--,                                               ,---,                         ,--.' |              /. ./|             ,--,  | :      |    |   : |'. \   / .`|   ,--,  | :  ,--.'|_    ,---,   .   ;  ,/.  :        
|  :  /`. /   |  | :,'              __  ,-.        |   ' :                         ,--. :/ |                   |  |  :     |  | :,' |  | :,' \    /  \                 ,---.'|,--.'|                           ,---.    __  ,-.  ,---.'|                         |  |  :          .--'.  ' ;          ,---.'|  : '      :    ;   | ; \ `\ /' / ;,---.'|  : '  |  | :,' ,---.'|   '   |  | :  ;        
;  |  |--`    :  : ' :            ,' ,'/ /|        ;   ; '                         :  : ' /  .--.--.           :  :  :     :  : ' : :  : ' : |   :    |  .--.--.       |   | :|  |,      .--.--.              '   ,'\ ,' ,'/ /|  |   | :     ,----._,.  ,----._,.:  :  :         /__./ \ : |          |   | : _' |      :        | `. \  /  / .';   : |  | ;  :  : ' : |   | :   '   |  ./   :        
|  :  ;_    .;__,'  /    ,--.--.  '  | |' |        '   | |__   ,---.     ,--.--.   |  '  /  /  /    '          :  |  |,--.;__,'  /.;__,'  /  |   | .\ : /  /    '      |   | |`--'_     /  /    '     ,---.  /   /   |'  | |' |  |   | |    /   /  ' / /   /  ' /:  |  |,--. .--'.  '   \' .   ,---.  :   : |.'  |      |    :   :  \  \/  / ./ |   | : _' |.;__,'  /  :   : :   |   :       ,        
 \  \    `. |  |   |    /       \ |  |   ,'        |   | :.'| /     \   /       \  '  |  : |  :  /`./          |  :  '   |  |   | |  |   |   .   : |: ||  :  /`./    ,--.__| |,' ,'|   |  :  /`./    /     \.   ; ,. :|  |   ,',--.__| |   |   :     ||   :     ||  :  '   |/___/ \ |    ' '  /     \ |   ' '  ; :      :            \  \.'  /  :   : |.'  ||  |   |   :     |,-. \   \     /         
  `----.   \:__,'| :   .--.  .-. |'  :  /          '   :    ;/    /  | .--.  .-. | |  |   \|  :  ;_            |  |   /' :__,'| : :__,'| :   |   |  \ :|  :  ;_     /   ,'   |'  | |   |  :  ;_     /    / ''   | |: :'  :  / /   ,'   |   |   | .\  .|   | .\  .|  |   /' :;   \  \;      : /    / ' '   |  .'. |      |    ;   |    \  ;  ;   |   ' '  ; ::__,'| :   |   : '  |  ;   ,   '\         
  __ \  \  |  '  : |__  \__\/: . .|  | '           |   |  ./.    ' / |  \__\/: . . '  : |. \\  \    `.         '  :  | | | '  : |__ '  : |__ |   : .  | \  \    `. .   '  /  ||  | :    \  \    `. .    ' / '   | .; :|  | ' .   '  /  |   .   ; ';  |.   ; ';  |'  :  | | | \   ;  `      |.    ' /  |   | :  | '  ___ l            / \  \  \  \   \  .'. |  '  : |__ |   |  / : /   /      \        
 /  /`--'  /  |  | '.'| ," .--.; |;  : |           ;   : ;  '   ;   /|  ," .--.; | |  | ' \ \`----.   \        |  |  ' | : |  | '.'||  | '.'|:     |`-'  `----.   \'   ; |:  |'  : |__   `----.   \'   ; :__|   :    |;  : | '   ; |:  |   '   .   . |'   .   . ||  |  ' | :  .   \    .\  ;'   ; :__ '   : |  : ;/    /\    J   :  ;  /\  \  \  `---`:  | '  |  | '.'|'   : |: |.   ;  ,/.  :        
'--'.     /   ;  :    ;/  /  ,.  ||  , ;           |   ,/   '   |  / | /  /  ,.  | '  : |--'/  /`--'  /        |  :  :_:,' ;  :    ;;  :    ;:   : :    /  /`--'  /|   | '/  '|  | '.'| /  /`--'  /'   | '.'|\   \  / |  , ; |   | '/  '___ `---`-'| | `---`-'| ||  :  :_:,'   \   \   ' \ |'   | '.'||   | '  ,//  ../  `..-    ,./__;  \  ;  \      '  ; |  ;  :    ;|   | '/ :'   |  | :  ;        
  `--'---'    |  ,   /;  :   .'   \---'            '---'    |   :    |;  :   .'   \;  |,'  '--'.     /         |  | ,'     |  ,   / |  ,   / |   | :   '--'.     / |   :    :|;  :    ;'--'.     / |   :    : `----'   ---'  |   :    :/  .\.'__/\_: | .'__/\_: ||  | ,'        :   '  |--" |   :    :;   : ;--' \    \         ; |   : / \  \  ;     |  : ;  |  ,   / |   :    |'   |  ./   :        
               ---`-' |  ,     .-./                          \   \  / |  ,     .-./'--'      `--'---'          `--''        ---`-'   ---`-'  `---'.|     `--'---'   \   \  /  |  ,   /   `--'---'   \   \  /                  \   \  / \  ; |   :    : |   :    :`--''           \   \ ;     \   \  / |   ,/      \    \      ,'  ;   |/   \  ' |     '  ,/    ---`-'  /    \  / |   :      /         
                       `--`---'                               `----'   `--`---'                                                                `---`                 `----'    ---`-'                `----'                    `----'   `--" \   \  /   \   \  /                  '---"       `----'  '---'        "---....--'    `---'     `--`      '--'             `-'----'   \   \   .'          
                                                                                                                                                                                                                                              `--`-'     `--`-'                                                                                                                    `---`-'            ]]

run_script()
--[[ .----------------.  .----------------.  .----------------.  .----------------.   .----------------.  .----------------.  .----------------.  .----------------.  .----------------.   .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.   
| .--------------. || .--------------. || .--------------. || .--------------. | | .--------------. || .--------------. || .--------------. || .--------------. || .--------------. | | .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. |  
| |    _______   | || |  _________   | || |      __      | || |  _______     | | | |   _____      | || |  _________   | || |      __      | || |  ___  ____   | || |    _______   | | | |  ____  ____  | || |  _________   | || |  _________   | || |   ______     | || |    _______   | || |  ________    | || |     _____    | || |    _______   | || |     ______   | || |     ____     | || |  _______     | || |  ________    | || |              | || |    ______    | || |    ______    | || |  ____  ____  | || | _____  _____ | || |     ______   | || |  ____  ____  | || |     _____    | || |  ____  ____  | || |   _    _     | || |  _________   | || |   ______     | || |     ____     | |  
| |   /  ___  |  | || | |  _   _  |  | || |     /  \     | || | |_   __ \    | | | |  |_   _|     | || | |_   ___  |  | || |     /  \     | || | |_  ||_  _|  | || |   /  ___  |  | | | | |_   ||   _| | || | |  _   _  |  | || | |  _   _  |  | || |  |_   __ \   | || |   /  ___  |  | || | |_   ___ `.  | || |    |_   _|   | || |   /  ___  |  | || |   .' ___  |  | || |   .'    `.   | || | |_   __ \    | || | |_   ___ `.  | || |              | || |  .' ___  |   | || |  .' ___  |   | || | |_   ||   _| | || ||_   _||_   _|| || |   .' ___  |  | || | |_   ||   _| | || |    |_   _|   | || | |_  _||_  _| | || |  | |  | |    | || | |  _   _  |  | || |  |_   _ \    | || |   .' __ '.   | |  
| |  |  (__ \_|  | || | |_/ | | \_|  | || |    / /\ \    | || |   | |__) |   | | | |    | |       | || |   | |_  \_|  | || |    / /\ \    | || |   | |_/ /    | || |  |  (__ \_|  | | | |   | |__| |   | || | |_/ | | \_|  | || | |_/ | | \_|  | || |    | |__) |  | || |  |  (__ \_|  | || |   | |   `. \ | || |      | |     | || |  |  (__ \_|  | || |  / .'   \_|  | || |  /  .--.  \  | || |   | |__) |   | || |   | |   `. \ | || |              | || | / .'   \_|   | || | / .'   \_|   | || |   | |__| |   | || |  | | /\ | |  | || |  / .'   \_|  | || |   | |__| |   | || |      | |     | || |   \ \  / /   | || |  | |__| |_   | || | |_/ | | \_|  | || |    | |_) |   | || |   | (__) |   | |  
| |   '.___`-.   | || |     | |      | || |   / ____ \   | || |   |  __ /    | | | |    | |   _   | || |   |  _|  _   | || |   / ____ \   | || |   |  __'.    | || |   '.___`-.   | | | |   |  __  |   | || |     | |      | || |     | |      | || |    |  ___/   | || |   '.___`-.   | || |   | |    | | | || |      | |     | || |   '.___`-.   | || |  | |         | || |  | |    | |  | || |   |  __ /    | || |   | |    | | | || |              | || | | |    ____  | || | | |    ____  | || |   |  __  |   | || |  | |/  \| |  | || |  | |         | || |   |  __  |   | || |   _  | |     | || |    > `' <    | || |  |____   _|  | || |     | |      | || |    |  __'.   | || |   .`____'.   | |  
| |  |`\____) |  | || |    _| |_     | || | _/ /    \ \_ | || |  _| |  \ \_  | | | |   _| |__/ |  | || |  _| |___/ |  | || | _/ /    \ \_ | || |  _| |  \ \_  | || |  |`\____) |  | | | |  _| |  | |_  | || |    _| |_     | || |    _| |_     | || |   _| |_      | || |  |`\____) |  | || |  _| |___.' / | || |     _| |_    | || |  |`\____) |  | || |  \ `.___.'\  | || |  \  `--'  /  | || |  _| |  \ \_  | || |  _| |___.' / | || |      _       | || | \ `.___]  _| | || | \ `.___]  _| | || |  _| |  | |_  | || |  |   /\   |  | || |  \ `.___.'\  | || |  _| |  | |_  | || |  | |_' |     | || |  _/ /'`\ \_  | || |      _| |_   | || |    _| |_     | || |   _| |__) |  | || |  | (____) |  | |  
| |  |_______.'  | || |   |_____|    | || ||____|  |____|| || | |____| |___| | | | |  |________|  | || | |_________|  | || ||____|  |____|| || | |____||____| | || |  |_______.'  | | | | |____||____| | || |   |_____|    | || |   |_____|    | || |  |_____|     | || |  |_______.'  | || | |________.'  | || |    |_____|   | || |  |_______.'  | || |   `._____.'  | || |   `.____.'   | || | |____| |___| | || | |________.'  | || |     (_)      | || |  `._____.'   | || |  `._____.'   | || | |____||____| | || |  |__/  \__|  | || |   `._____.'  | || | |____||____| | || |  `.___.'     | || | |____||____| | || |     |_____|  | || |   |_____|    | || |  |_______/   | || |  `.______.'  | |  
| |              | || |              | || |              | || |              | | | |              | || |              | || |              | || |              | || |              | | | |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | |  
| '--------------' || '--------------' || '--------------' || '--------------' | | '--------------' || '--------------' || '--------------' || '--------------' || '--------------' | | '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' |  
 '----------------'  '----------------'  '----------------'  '----------------'   '----------------'  '----------------'  '----------------'  '----------------'  '----------------'   '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'   ]]